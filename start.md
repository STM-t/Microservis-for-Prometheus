### Введение.
Этот файл является структурированным отчетом с подробным описанием выполняемых действий в процессе решения задания. Выполнены основная часть и все бонусные задания.


# Развертывание микросервиса с помощью Ansible и Vagrant

- Этот Python-микросервиис собирает Prometheus метрики, определяет тип хоста, на котором запущен микросервис
- ВМ AlmaLinux9 можно создать с помощью Vagrant
- Файл main.py вместе с requirmets.txt доставляются на виртуальную машину с помощью Ansible, собирается в Docker-контейнер, оборачивается в systemd и запускается
- Есть возможность запустить контейнер прямо из ВМ с скриптом start_microservice.sh при наличии Dockerfile, main.py и requirements.txt
- Для раскатки этого сервиса используется Ansible и Vagrant
- Гипервизор 2-го типа: virt-manager (libvirt)
- ОС для ВМ - AlmaLinux 9
  
## Струкутра проекта    

```
.
├── vagrant/
│   └── Vagrantfile
└── ansible/
    ├── ansible.cfg
    ├── inventory.ini
    ├── playbook.yml
    └── roles/
        └── microservice/
            ├── files/
            │   ├── Dockerfile
            │   ├── main.py
            │   ├── requirements.txt
            │   └── start_microservice.sh
            ├── tasks/
            │    ├── docker-setup.yml
            │    └── main.yml
            └── templates/
            │    └── metrics.service.j2
            └── handlers/
                └── main.yml
```

### Технологический стек:
- **Vagrant + Libvirt** - создание виртуальной машины
- **Ansible** - конфигурация и оркестрация
- **Docker** - контейнеризация приложения
- **Systemd** - управление сервисом на уровне ОС

### Реализованные этапы:

1. **Инфраструктура как код (Vagrant)**
   - Автоматическое создание ВМ AlmaLinux 9
   - Предварительная настройка: пользователь, Docker, сеть
   - Провиженинг через Ansible

2. **Конфигурация как код (Ansible)**
   - Роль-based структура проекта
   - Копирование артефактов приложения
   - Сборка Docker-образа
   - Развертывание systemd unit-файла

3. **Управление сервисом (Systemd + Docker)**
   - Запуск контейнера как systemd-сервиса
   - Автоматический restart при падениях
   - Централизованное логирование через journalctl
   - Управление через стандартные systemctl команды
